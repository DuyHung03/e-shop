{"version":3,"file":"static/js/85.404ba7b1.chunk.js","mappings":"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","sources":["components/CartItem/CartItem.js","webpack://e-shop/./src/components/CartItem/CartItem.module.scss?48ee"],"sourcesContent":["import classNames from 'classnames/bind';\r\nimport styles from './CartItem.module.scss';\r\nimport Button from '../Button/Button';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport {\r\n    faPlus,\r\n    faSubtract,\r\n    faXmarkCircle,\r\n} from '@fortawesome/free-solid-svg-icons';\r\nimport {\r\n    Suspense,\r\n    lazy,\r\n    useCallback,\r\n    useContext,\r\n    useState,\r\n} from 'react';\r\nimport { AppContext } from '../../context/AppProvider';\r\nimport { Skeleton, Tooltip } from 'antd';\r\nimport {\r\n    collection,\r\n    deleteDoc,\r\n    doc,\r\n    getDocs,\r\n    query,\r\n    updateDoc,\r\n    where,\r\n} from 'firebase/firestore';\r\nimport { db } from '../../firebase/firebase';\r\nconst Image = lazy(() => import('../Image/Image'));\r\n\r\nconst cx = classNames.bind(styles);\r\n\r\nconst CartItem = ({ productData = {} }) => {\r\n    const product = productData.product;\r\n\r\n    const { setTotal, setSelected } =\r\n        useContext(AppContext);\r\n\r\n    const [isChecked, setIsChecked] = useState(false);\r\n\r\n    /* `handleChooseProduct` is a function that toggles the `isChecked` state and updates the total and\r\n   selected quantity of products in the cart based on whether the product is checked or unchecked.\r\n   It is wrapped in `useCallback` to memoize the function and prevent unnecessary re-renders. The\r\n   dependencies array `[setIsChecked, isChecked, product.price, setTotal, setSelected,\r\n   productData.quantity]` ensures that the function is only re-created if any of these values\r\n   change. */\r\n    const handleChooseProduct = useCallback(() => {\r\n        setIsChecked(!isChecked);\r\n        if (!isChecked) {\r\n            setTotal(\r\n                (prev) =>\r\n                    prev +\r\n                    product.price * productData.quantity,\r\n            );\r\n            setSelected(\r\n                (prev) => prev + productData.quantity,\r\n            );\r\n        } else {\r\n            setTotal(\r\n                (prev) =>\r\n                    prev -\r\n                    product.price * productData.quantity,\r\n            );\r\n            setSelected(\r\n                (prev) => prev - productData.quantity,\r\n            );\r\n        }\r\n    }, [\r\n        setIsChecked,\r\n        isChecked,\r\n        product.price,\r\n        setTotal,\r\n        setSelected,\r\n        productData.quantity,\r\n    ]);\r\n\r\n    const handleIncrease = async () => {\r\n        const querySnapshot = await getDocs(\r\n            query(\r\n                collection(db, 'cart'),\r\n                where('product.id', '==', product.id),\r\n            ),\r\n        );\r\n        const docRef = querySnapshot.docs[0].ref;\r\n        await updateDoc(docRef, {\r\n            quantity:\r\n                querySnapshot.docs[0].data().quantity + 1,\r\n        });\r\n        console.log('updated');\r\n    };\r\n\r\n    /**\r\n     * The above code defines two async functions to handle decreasing the quantity of a product in a\r\n     * cart and deleting a product from the cart in a Firestore database.\r\n     */\r\n    const handleDecrease = async () => {\r\n        const querySnapshot = await getDocs(\r\n            query(\r\n                collection(db, 'cart'),\r\n                where('product.id', '==', product.id),\r\n            ),\r\n        );\r\n        const docRef = querySnapshot.docs[0].ref;\r\n        await updateDoc(docRef, {\r\n            quantity:\r\n                querySnapshot.docs[0].data().quantity - 1,\r\n        });\r\n        console.log('updated');\r\n    };\r\n\r\n    const handleDelete = async () => {\r\n        await deleteDoc(doc(db, 'cart', productData.id));\r\n    };\r\n\r\n    return (\r\n        <div className={cx('wrapper')}>\r\n            <input\r\n                type=\"checkbox\"\r\n                checked={isChecked}\r\n                onChange={handleChooseProduct}\r\n            />\r\n            <Suspense fallback={<Skeleton.Image active />}>\r\n                <Image\r\n                    src={product.images[0]}\r\n                    className={cx('image')}\r\n                    onClick={handleChooseProduct}\r\n                />\r\n            </Suspense>\r\n            <p\r\n                className={cx('title')}\r\n                onClick={handleChooseProduct}\r\n            >\r\n                {product.title}\r\n            </p>\r\n            <span\r\n                className={cx('price')}\r\n                onClick={handleChooseProduct}\r\n            >\r\n                <span>Unit Price:</span>${product.price}\r\n            </span>\r\n            <div className={cx('quantity')}>\r\n                <Button\r\n                    className={cx('increase')}\r\n                    onClick={handleIncrease}\r\n                    disable={isChecked ? true : false}\r\n                >\r\n                    <FontAwesomeIcon icon={faPlus} />\r\n                </Button>\r\n                <span>{productData.quantity}</span>\r\n                <Button\r\n                    className={cx('decrease')}\r\n                    onClick={handleDecrease}\r\n                    disable={isChecked ? true : false}\r\n                >\r\n                    <FontAwesomeIcon icon={faSubtract} />\r\n                </Button>\r\n            </div>\r\n            <Tooltip\r\n                title=\"Delete product\"\r\n                mouseEnterDelay={1}\r\n            >\r\n                <Button\r\n                    className={cx('delete')}\r\n                    onClick={handleDelete}\r\n                >\r\n                    <FontAwesomeIcon icon={faXmarkCircle} />\r\n                </Button>\r\n            </Tooltip>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default CartItem;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"CartItem_wrapper__SNxQz\",\"title\":\"CartItem_title__4ZesO\",\"price\":\"CartItem_price__CGdM8\",\"quantity\":\"CartItem_quantity__RNImp\",\"image\":\"CartItem_image__MYwwR\",\"delete\":\"CartItem_delete__fOUl-\"};"],"names":["Image","lazy","cx","classNames","_ref","_ref$productData","productData","product","_useContext","useContext","AppContext","setTotal","setSelected","_useState","useState","_useState2","_slicedToArray","isChecked","setIsChecked","handleChooseProduct","useCallback","prev","price","quantity","handleIncrease","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","querySnapshot","docRef","wrap","_context","next","getDocs","query","collection","db","where","id","sent","docs","ref","updateDoc","data","console","log","stop","apply","arguments","handleDecrease","_ref3","_callee2","_context2","handleDelete","_ref4","_callee3","_context3","deleteDoc","doc","_jsxs","className","children","_jsx","type","checked","onChange","Suspense","fallback","Skeleton","active","src","images","onClick","title","Button","disable","FontAwesomeIcon","icon","faPlus","faSubtract","Tooltip","mouseEnterDelay","faXmarkCircle"],"sourceRoot":""}